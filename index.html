<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gestor de Meses - Escala GBM</title>
<style>
body { font-family: sans-serif; padding: 10px; max-width: 600px; margin: auto; }
button { padding: 10px; margin: 5px 0; font-size: 16px; cursor: pointer; }
ul { list-style: none; padding: 0; }
li { padding: 5px 0; border-bottom: 1px solid #ccc; }
</style>
</head>
<body>

<h2>Gestor - Meses</h2>
<button id="createMonthBtn">Criar mês</button>
<ul id="monthList"></ul>

<script type="module">
import { createClient } from 'https://esm.sh/@supabase/supabase-js@2'

const supabaseUrl = 'https://exhfpeeslhjpvfmbonyz.supabase.co'
const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFub24iLCJpYXQiOjE3NjM4MzEyOTcsImV4cCI6MjA3OTQwNzI5N30.zwLuyDV8vuZhH0vSl22CmK0QxXHyzY3jcJMNA2wt-zo'
const supabase = createClient(supabaseUrl, supabaseKey)

const monthList = document.getElementById('monthList')
const createBtn = document.getElementById('createMonthBtn')

// Listar meses
async function loadMonths() {
  const { data, error } = await supabase.from('months').select('*').order('year').order('month')
  if (error) return alert('Erro ao carregar meses: ' + error.message)
  
  monthList.innerHTML = ''
  data.forEach(m => {
    const li = document.createElement('li')
    li.textContent = `Mês: ${m.month} / Ano: ${m.year}`
    monthList.appendChild(li)
  })
}

// Criar mês
createBtn.addEventListener('click', async () => {
  const month = parseInt(prompt('Número do mês (1-12)'))
  const year = parseInt(prompt('Ano (ex: 2025)'))
  if (!month || !year) return alert('Mês ou ano inválido')
  
  const { error } = await supabase.from('months').insert([{ month, year }])
  if (error) return alert('Erro ao criar mês: ' + error.message)
  alert('Mês criado!')
  loadMonths()
})

// Inicializar
loadMonths()
</script>

</body>
</html>
